{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./add_officier.js","webpack:///./inc/response.js","webpack:///external \"@sendgrid/mail\"","webpack:///external \"aws-sdk\"","webpack:///external \"axios\"","webpack:///external \"jsonwebtoken\""],"names":["documentClient","aws","DynamoDB","DocumentClient","sgMail","require","jwt","axios","genPassword","text","possible","i","charAt","Math","floor","random","length","main","event","context","callback","data","firstname","lastname","rank","postingarea","postedfrom","phone","email","console","log","genUserName","genPass","complaints","params","TableName","process","env","OFFICIERS_TABLE","Item","officierid","postingstate","postingdistrict","postingpincode","createSet","status","username","toLowerCase","password","token","sign","created_at","Date","toISOString","put","err","result","failure","message","msg","url","get","then","response","success","catch","body","buildResponse","statusCode","headers","JSON","stringify"],"mappings":"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","file":"add_officier.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./add_officier.js\");\n","import aws from 'aws-sdk';\nimport { success, failure } from './inc/response';\nconst documentClient = new aws.DynamoDB.DocumentClient();\nconst sgMail = require('@sendgrid/mail');\nvar jwt = require('jsonwebtoken');\nconst axios = require('axios')\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\nconst genPassword = () => {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n      \n        for (var i = 0; i < 10; i++)\n          text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n        return text;\n}\n\nexport const main = (event, context, callback) => {\n\n//    const data = JSON.parse(event.body)\n   const data = {\n       firstname: \"Raj\",\n       lastname: \"Das\",\n       rank: \"DC\",\n       postingarea: \"Bhubaneswar\",\n       postedfrom: \"2019-08-02\",\n       phone: \"7809694275\",\n       email: \"mail.rajdas@gmail.com\",\n   }\n   console.log(data);\n   \n   const genUserName = `${data.lastname}${data.firstname}${Math.floor(Math.random() * 90 + 10 * 999)}`\n   const genPass = genPassword()\n   const complaints = ['0']\n   const params = {\n       TableName: process.env.OFFICIERS_TABLE,\n       Item:{\n        officierid: Math.floor(Math.random() * 1000 * 60 * 60 * 24 * 365.25),\n        firstname: data.firstname,\n        lastname: data.lastname,\n        rank: data.rank,\n        postingarea: data.postingarea,\n        postingstate: data.postingstate,\n        postingdistrict: data.postingdistrict,\n        postingpincode: data.postingpincode,\n        postedfrom: data.postedfrom,\n        phone: data.phone,\n        email: data.email,\n        complaints: documentClient.createSet(complaints),\n        status: 1,\n        username: genUserName.toLowerCase(),\n        password: genPass,\n        token: jwt.sign({ password: genPass }, 'sih2019'),\n        /*\n            status: 1 active\n        */\n        created_at: new Date().toISOString()\n       }\n   }\n \n   \n   documentClient.put(params, (err, result) => {\n        if(err) {\n            console.log(err);\n            callback(null , failure({ status: false, message: 'failed to registered complaint' }))\n        } else {\n            console.log(params.Item)\n\n            const msg = `Your Username- ${genUserName.toLowerCase()} Password- ${genPass}`\n            const url = `http://login.smsadda.com/API/pushsms.aspx?loginID=giit&password=giitpc&mobile=+91${data.phone}&text=${msg}&senderid=SIH-2019&route_id=1&Unicode=0`\n            axios.get(url).then(function(response){\n                console.log(response);\n                callback(null, success({status: true, message: 'officier add successfully' }))\n            })\n            .catch(function(err){\n                console.log(err);\n            })\n            // const msg = {\n            //     to: `${data.email}`,\n            //     from: 'test@example.com',\n            //     subject: 'Complaint Status',\n            //     text: `Credentials for login\n            //         Username- ${lastname}${firstname}${Math.floor(Math.random() * 90 + 10 * 999)}\n            //         Password- ${genPassword}\n            //     `,\n            // };\n            // sgMail.send(msg);\n        \n        }\n   })\n}","export function success(body) {\n    return buildResponse(200, body);\n  }\n  \n  export function failure(body) {\n    return buildResponse(500, body);\n  }\n  \n  function buildResponse(statusCode, body) {\n    return {\n      statusCode: statusCode,\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Credentials\": true\n      },\n      body: JSON.stringify(body)\n    };\n  }\n  ","module.exports = require(\"@sendgrid/mail\");","module.exports = require(\"aws-sdk\");","module.exports = require(\"axios\");","module.exports = require(\"jsonwebtoken\");"],"sourceRoot":""}